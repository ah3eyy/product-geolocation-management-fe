<!--begin::Container-->
<div class="container-xxl" id="kt_content_container">
  <ng-container *ngIf="loading">
    <div class="flex justify-content-center" style="display: flex;margin-bottom: 20px;">
      <div class="spinner-border"></div>
    </div>
  </ng-container>

  <ng-container *ngIf="network">
    <div class="flex justify-content-center" style="display: flex;margin-bottom: 20px;"
         (click)="userTransactions()">
      Network connection error. click to reload
    </div>
  </ng-container>


  <ng-container *ngIf="!loading && !network">
    <!--begin::Card-->
    <div class="card">
      <!--begin::Card header-->
      <div class="card-header border-0 pt-6">
        <!--begin::Card title-->
        <div class="card-title">
          <!--begin::Search-->
          <div class="d-flex align-items-center position-relative my-1">
            <!--begin::Svg Icon | path: icons/duotune/general/gen021.svg-->
            <span class="svg-icon svg-icon-1 position-absolute ms-6">
													<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                               fill="none">
														<rect opacity="0.5" x="17.0365" y="15.1223" width="8.15546" height="2" rx="1"
                                  transform="rotate(45 17.0365 15.1223)" fill="black"/>
														<path
                              d="M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z"
                              fill="black"/>
													</svg>
												</span>
            <!--end::Svg Icon-->
            <input type="text" data-kt-user-table-filter="search"
                   class="form-control form-control-solid w-250px ps-14" placeholder="Search user"
                   [(ngModel)]="search_value.value"
                   (keyup.enter)="userTransactions()"
            />
          </div>
          <!--end::Search-->
        </div>
        <!--begin::Card title-->

      </div>
      <!--end::Card header-->
      <!--begin::Card body-->
      <div class="card-body py-4 table-responsive">
        <!--begin::Table-->
        <table class="table align-middle table-row-dashed fs-6 gy-5" id="kt_table_users">
          <!--begin::Table head-->
          <thead>
          <!--begin::Table row-->
          <tr class="text-start text-muted fw-bolder fs-7 text-uppercase gs-0">

            <th class="min-w-125px">Reference</th>
            <th class="min-w-125px">Amount</th>
            <th class="min-w-125px">Purchase To</th>
            <th class="min-w-125px">Service Type</th>
            <th class="min-w-125px">Transaction Type</th>
            <th class="min-w-125px">Date Created</th>
            <th class="min-w-125px">Status</th>
          </tr>
          <!--end::Table row-->
          </thead>
          <!--end::Table head-->
          <!--begin::Table body-->
          <tbody class="text-gray-600 fw-bold">

          <ng-container *ngFor="let tnx of transactions?.data">
            <!--begin::Table row-->
            <tr style="cursor: pointer; outline: none; "
                (click)="onViewTransactionDetails(tnx)"
            >


              <td>
                {{tnx?.reference}}
              </td>
              <td>
                {{tnx?.amount}}
              </td>
              <td>
                {{tnx?.purchase_to || '--'}}
              </td>
              <td>
                {{tnx?.service_type || '--'}}
              </td>
              <td>
                {{
                tnx?.transaction_type == 'funding' ? 'Funding' :
                  tnx?.transaction_type == 'refund' ? 'Refund':
                    tnx?.transaction_type == 'charge' ? 'Charges on transaction':'Service Purchase'
                }}
              </td>
              <td>
                {{tnx?.created_at | date :'medium'}}
              </td>
              <td>

                <ng-container *ngIf="tnx?.status == 'pending'">
                  <div class="badge badge-primary fw-bolder">Declined</div>
                </ng-container>
                <ng-container *ngIf="tnx?.status == 'processing'">
                  <div class="badge badge-light-info fw-bolder">Processing</div>
                </ng-container>
                <ng-container *ngIf="tnx?.status == 'failed'">
                  <div class="badge badge-light-danger fw-bolder">Failed</div>
                </ng-container>
                <ng-container *ngIf="tnx?.status == 'declined'">
                  <div class="badge badge-danger fw-bolder">Declined</div>
                </ng-container>
                <ng-container *ngIf="tnx?.status == 'completed' || tnx?.status == 'complete'">
                  <div class="badge badge-success fw-bolder">completed</div>
                </ng-container>

              </td>


            </tr>
            <!--end::Table row-->
          </ng-container>

          </tbody>
          <!--end::Table body-->
        </table>
        <!--end::Table-->

        <div style="width: 100%;">
          <ul class="pagination pagination-outline">

            <li class="page-item previous disabled m-1" (click)="userTransactions(transactions?.prev_page_url)">
              <a class="page-link"><i class="previous"></i></a>
            </li>

            <ng-container *ngFor="let item of transactions?.links;let first=first; let last=last; let i= index">

              <ng-container *ngIf="!first && !last && i <= 5">

                <li class="page-item m-1" [ngClass]="{'active' : item?.active}" (click)="userTransactions(item?.url)">
                  <a class="page-link">{{item?.label}}</a>
                </li>

              </ng-container>

            </ng-container>


            <!--            <li class="page-item m-1"><a href="#" class="page-link">1</a></li>-->

            <!--            <li class="page-item m-1"><a href="#" class="page-link">3</a></li>-->
            <!--            <li class="page-item m-1"><a href="#" class="page-link">4</a></li>-->
            <!--            <li class="page-item m-1"><a href="#" class="page-link">5</a></li>-->
            <!--            <li class="page-item m-1"><a href="#" class="page-link">6</a>-->

            <li class="page-item next m-1" (click)="userTransactions(transactions?.next_page_url)"><a class="page-link"><i
              class="next"></i></a></li>

          </ul>
        </div>
      </div>
      <!--end::Card body-->
    </div>
  </ng-container>
  <!--end::Card-->
</div>
